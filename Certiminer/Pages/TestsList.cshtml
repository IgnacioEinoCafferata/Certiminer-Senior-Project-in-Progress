@page "/TestsList"
@model Certiminer.Pages.TestsListModel
@{
    ViewData["Title"] = "Tests";
}

<section class="page-wrap">
    <div class="container">
        <div class="glass-panel">
            <h2 class="mb-3">Tests</h2>

            @if (Model.Items.Count == 0)
            {
                <div class="text-muted">No tests available.</div>
            }
            else
            {
                <div class="table-responsive">
                    <table class="table align-middle">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th class="text-center">Status</th>
                                <th class="text-end" style="width: 160px;">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var t in Model.Items)
                            {
                                <tr>
                                    <td>@t.Title</td>
                                    <td class="text-center">
                                        @if (!t.IsActive)
                                        {
                                            <span class="badge bg-secondary">Inactive</span>
                                        }
                                        else if (t.Completed)
                                        {
                                            <span class="badge bg-success">
                                                Completed@(t.LastScore.HasValue ? $" ({t.LastScore}/{t.LastTotal})" : "")
                                            </span>
                                        }
                                        else
                                        {
                                            <span class="badge bg-warning text-dark">Pending</span>
                                        }
                                    </td>
                                    <td class="text-end">
                                        @if (t.IsActive)
                                        {
                                            <a class="btn btn-yellow btn-sm"
                                               asp-page="/TakeTest"
                                               asp-route-testId="@t.Id">
                                                Take test
                                            </a>

                                        }
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            }
        </div>
    </div>
</section>
